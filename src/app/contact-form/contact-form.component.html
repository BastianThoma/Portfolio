<form id="contactForm" (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">
  <div class="labelContainer">
    <label
      class="inputBox fontFiraCode borderTopTwoPixel"
      for="name"
    >
      <span>{{ "CONTACT_FORM.NAME_LABEL" | translate }}</span>
      <input
        id="name"
        class="form-control fontFiraCode"
        type="text"
        name="name"
        [(ngModel)]="contactData.name"
        #nameInput="ngModel"
        #nameInputFocus
        [placeholder]="
          nameInput.invalid && nameInput.touched
            ? ('CONTACT_FORM.NAME_ERROR' | translate)
            : ('CONTACT_FORM.NAME_PLACEHOLDER' | translate)
        "
        [attr.aria-describedby]="nameInput.invalid && nameInput.touched ? 'name-error' : null"
        [attr.aria-invalid]="nameInput.invalid && nameInput.touched"
        required
        pattern="^(?!\s*$)[a-zA-Z\s]+$"
      />
      <span
        *ngIf="nameInput.invalid && nameInput.touched"
        id="name-error"
        class="sr-only"
        role="alert"
      >
        {{ "CONTACT_FORM.NAME_ERROR" | translate }}
      </span>
    </label>
  </div>

  <div class="labelContainer">
    <label
      class="inputBox fontFiraCode borderTopTwoPixel borderBotTwoPixel"
      for="email"
    >
      <span>{{ "CONTACT_FORM.EMAIL_LABEL" | translate }}</span>
      <input
        id="email"
        class="form-control fontFiraCode"
        type="email"
        name="email"
        [(ngModel)]="contactData.email"
        #emailInput="ngModel"
        [placeholder]="
          emailInput.invalid && emailInput.touched
            ? ('CONTACT_FORM.EMAIL_ERROR' | translate)
            : ('CONTACT_FORM.EMAIL_PLACEHOLDER' | translate)
        "
        [attr.aria-describedby]="emailInput.invalid && emailInput.touched ? 'email-error' : null"
        [attr.aria-invalid]="emailInput.invalid && emailInput.touched"
        pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$"
        required
        [class.invalidEffect]="emailInput.invalid && emailInput.touched"
      />
      <span
        *ngIf="emailInput.invalid && emailInput.touched"
        id="email-error"
        class="sr-only"
        role="alert"
      >
        {{ "CONTACT_FORM.EMAIL_ERROR" | translate }}
      </span>
    </label>
  </div>
  <div class="labelContainer">
    <label
      id="messageBox"
      class="messageBox fontFiraCode borderBotTwoPixel"
      for="message"
    >
      <span>{{ "CONTACT_FORM.MESSAGE_LABEL" | translate }}</span>
      <input
        id="message"
        class="form-control fontFiraCode"
        name="message"
        [(ngModel)]="contactData.message"
        #messageInput="ngModel"
        [placeholder]="
          messageInput.invalid && messageInput.touched
            ? ('CONTACT_FORM.MESSAGE_ERROR' | translate)
            : ('CONTACT_FORM.MESSAGE_PLACEHOLDER' | translate)
        "
        [attr.aria-describedby]="messageInput.invalid && messageInput.touched ? 'message-error' : null"
        [attr.aria-invalid]="messageInput.invalid && messageInput.touched"
        required
        pattern="^(?!\s*$).+"
      />
      <span
        *ngIf="messageInput.invalid && messageInput.touched"
        id="message-error"
        class="sr-only"
        role="alert"
      >
        {{ "CONTACT_FORM.MESSAGE_ERROR" | translate }}
      </span>
    </label>
  </div>
  <div id="privacyContainer" class="labelContainer">
    <label class="customCheckbox">
      <div>
        <input
          id="checkboxInput"
          type="checkbox"
          [checked]="contactData.privacyAccepted"
          [attr.aria-describedby]="!contactData.privacyAccepted && contactForm.form.touched && contactData.name && contactData.email && contactData.message ? 'privacy-error' : null"
          [attr.aria-invalid]="!contactData.privacyAccepted && contactForm.form.touched"
          (change)="onPrivacyChange($event)"
          required
        />
        <span class="checkmark"></span>
      </div>
      <span id="checkBoxText" class="checkBoxText fontKarla">
        {{ "CONTACT_FORM.PRIVACY_POLICY_TEXT1" | translate }}
        <a href="privacy-policy" class="fontFiraCode" [attr.aria-label]="'CONTACT_FORM.PRIVACY_POLICY_LINK_ARIA_LABEL' | translate">{{
          "CONTACT_FORM.PRIVACY_POLICY_LINK" | translate
        }}</a>
        {{ "CONTACT_FORM.PRIVACY_POLICY_TEXT2" | translate }}
      </span>
    </label>
    <div
      *ngIf="
        !contactData.privacyAccepted &&
        contactForm.form.touched &&
        contactData.name &&
        contactData.email &&
        contactData.message
      "
      id="privacy-error"
      class="errorMessage fontFiraCode"
      role="alert"
    >
      <small>{{ "CONTACT_FORM.PRIVACY_ERROR" | translate }}</small>
    </div>
  </div>
  <div id="popup" class="popup">
    <span id="popupMessage" class="fontFiraCode"></span>
  </div>
  <button
    id="submitButton"
    class="submitButton fontFiraCode"
    type="submit"
    [disabled]="!contactForm.form.valid || !contactData.privacyAccepted"
  >
    {{ "CONTACT_FORM.SUBMIT_BUTTON" | translate }}
  </button>
</form>
